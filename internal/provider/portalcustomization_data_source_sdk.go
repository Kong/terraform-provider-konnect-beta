// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package provider

import (
	"context"
	"github.com/hashicorp/terraform-plugin-framework/diag"
	"github.com/hashicorp/terraform-plugin-framework/types"
	tfTypes "github.com/kong/terraform-provider-konnect-beta/internal/provider/types"
	"github.com/kong/terraform-provider-konnect-beta/internal/sdk/models/operations"
	"github.com/kong/terraform-provider-konnect-beta/internal/sdk/models/shared"
)

func (r *PortalCustomizationDataSourceModel) RefreshFromSharedPortalCustomization(ctx context.Context, resp *shared.PortalCustomization) diag.Diagnostics {
	var diags diag.Diagnostics

	if resp != nil {
		r.CSS = types.StringPointerValue(resp.CSS)
		if resp.Js == nil {
			r.Js = nil
		} else {
			r.Js = &tfTypes.Js{}
			r.Js.Custom = types.StringPointerValue(resp.Js.Custom)
			r.Js.Scripts = make([]types.String, 0, len(resp.Js.Scripts))
			for _, v := range resp.Js.Scripts {
				r.Js.Scripts = append(r.Js.Scripts, types.StringValue(v))
			}
		}
		r.Layout = types.StringPointerValue(resp.Layout)
		if resp.Menu == nil {
			r.Menu = nil
		} else {
			r.Menu = &tfTypes.Menu{}
			r.Menu.FooterBottom = []tfTypes.PortalMenuItem{}
			if len(r.Menu.FooterBottom) > len(resp.Menu.FooterBottom) {
				r.Menu.FooterBottom = r.Menu.FooterBottom[:len(resp.Menu.FooterBottom)]
			}
			for footerBottomCount, footerBottomItem := range resp.Menu.FooterBottom {
				var footerBottom tfTypes.PortalMenuItem
				footerBottom.External = types.BoolValue(footerBottomItem.External)
				footerBottom.Path = types.StringValue(footerBottomItem.Path)
				footerBottom.Title = types.StringValue(footerBottomItem.Title)
				footerBottom.Visibility = types.StringValue(string(footerBottomItem.Visibility))
				if footerBottomCount+1 > len(r.Menu.FooterBottom) {
					r.Menu.FooterBottom = append(r.Menu.FooterBottom, footerBottom)
				} else {
					r.Menu.FooterBottom[footerBottomCount].External = footerBottom.External
					r.Menu.FooterBottom[footerBottomCount].Path = footerBottom.Path
					r.Menu.FooterBottom[footerBottomCount].Title = footerBottom.Title
					r.Menu.FooterBottom[footerBottomCount].Visibility = footerBottom.Visibility
				}
			}
			r.Menu.FooterSections = []tfTypes.PortalFooterMenuSection{}
			if len(r.Menu.FooterSections) > len(resp.Menu.FooterSections) {
				r.Menu.FooterSections = r.Menu.FooterSections[:len(resp.Menu.FooterSections)]
			}
			for footerSectionsCount, footerSectionsItem := range resp.Menu.FooterSections {
				var footerSections tfTypes.PortalFooterMenuSection
				footerSections.Items = []tfTypes.PortalMenuItem{}
				for itemsCount, itemsItem := range footerSectionsItem.Items {
					var items tfTypes.PortalMenuItem
					items.External = types.BoolValue(itemsItem.External)
					items.Path = types.StringValue(itemsItem.Path)
					items.Title = types.StringValue(itemsItem.Title)
					items.Visibility = types.StringValue(string(itemsItem.Visibility))
					if itemsCount+1 > len(footerSections.Items) {
						footerSections.Items = append(footerSections.Items, items)
					} else {
						footerSections.Items[itemsCount].External = items.External
						footerSections.Items[itemsCount].Path = items.Path
						footerSections.Items[itemsCount].Title = items.Title
						footerSections.Items[itemsCount].Visibility = items.Visibility
					}
				}
				footerSections.Title = types.StringValue(footerSectionsItem.Title)
				if footerSectionsCount+1 > len(r.Menu.FooterSections) {
					r.Menu.FooterSections = append(r.Menu.FooterSections, footerSections)
				} else {
					r.Menu.FooterSections[footerSectionsCount].Items = footerSections.Items
					r.Menu.FooterSections[footerSectionsCount].Title = footerSections.Title
				}
			}
			r.Menu.Main = []tfTypes.PortalMenuItem{}
			if len(r.Menu.Main) > len(resp.Menu.Main) {
				r.Menu.Main = r.Menu.Main[:len(resp.Menu.Main)]
			}
			for mainCount, mainItem := range resp.Menu.Main {
				var main tfTypes.PortalMenuItem
				main.External = types.BoolValue(mainItem.External)
				main.Path = types.StringValue(mainItem.Path)
				main.Title = types.StringValue(mainItem.Title)
				main.Visibility = types.StringValue(string(mainItem.Visibility))
				if mainCount+1 > len(r.Menu.Main) {
					r.Menu.Main = append(r.Menu.Main, main)
				} else {
					r.Menu.Main[mainCount].External = main.External
					r.Menu.Main[mainCount].Path = main.Path
					r.Menu.Main[mainCount].Title = main.Title
					r.Menu.Main[mainCount].Visibility = main.Visibility
				}
			}
		}
		r.Robots = types.StringPointerValue(resp.Robots)
		if resp.SpecRenderer == nil {
			r.SpecRenderer = nil
		} else {
			r.SpecRenderer = &tfTypes.SpecRenderer{}
			r.SpecRenderer.InfiniteScroll = types.BoolPointerValue(resp.SpecRenderer.InfiniteScroll)
			r.SpecRenderer.ShowSchemas = types.BoolPointerValue(resp.SpecRenderer.ShowSchemas)
			r.SpecRenderer.TryItInsomnia = types.BoolPointerValue(resp.SpecRenderer.TryItInsomnia)
			r.SpecRenderer.TryItUI = types.BoolPointerValue(resp.SpecRenderer.TryItUI)
		}
		if resp.Theme == nil {
			r.Theme = nil
		} else {
			r.Theme = &tfTypes.Theme{}
			if resp.Theme.Colors == nil {
				r.Theme.Colors = nil
			} else {
				r.Theme.Colors = &tfTypes.Colors{}
				r.Theme.Colors.Primary = types.StringPointerValue(resp.Theme.Colors.Primary)
			}
			if resp.Theme.Mode != nil {
				r.Theme.Mode = types.StringValue(string(*resp.Theme.Mode))
			} else {
				r.Theme.Mode = types.StringNull()
			}
			r.Theme.Name = types.StringPointerValue(resp.Theme.Name)
		}
	}

	return diags
}

func (r *PortalCustomizationDataSourceModel) ToOperationsGetPortalCustomizationRequest(ctx context.Context) (*operations.GetPortalCustomizationRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var portalID string
	portalID = r.PortalID.ValueString()

	out := operations.GetPortalCustomizationRequest{
		PortalID: portalID,
	}

	return &out, diags
}
