// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package provider

import (
	"context"
	"encoding/json"
	"github.com/hashicorp/terraform-plugin-framework-jsontypes/jsontypes"
	"github.com/hashicorp/terraform-plugin-framework/diag"
	"github.com/hashicorp/terraform-plugin-framework/types"
	"github.com/kong/terraform-provider-konnect-beta/internal/provider/typeconvert"
	tfTypes "github.com/kong/terraform-provider-konnect-beta/internal/provider/types"
	"github.com/kong/terraform-provider-konnect-beta/internal/sdk/models/operations"
	"github.com/kong/terraform-provider-konnect-beta/internal/sdk/models/shared"
	"time"
)

func (r *DashboardResourceModel) RefreshFromSharedDashboardResponse(ctx context.Context, resp *shared.DashboardResponse) diag.Diagnostics {
	var diags diag.Diagnostics

	if resp != nil {
		r.CreatedAt = types.StringPointerValue(typeconvert.TimePointerToStringPointer(resp.CreatedAt))
		r.CreatedBy = types.StringPointerValue(resp.CreatedBy)
		r.Definition.PresetFilters = []tfTypes.AllFilterItems{}

		for _, presetFiltersItem := range resp.Definition.PresetFilters {
			var presetFilters tfTypes.AllFilterItems

			presetFilters.Field = types.StringValue(string(presetFiltersItem.Field))
			presetFilters.Operator = types.StringValue(string(presetFiltersItem.Operator))
			if presetFiltersItem.Value == nil {
				presetFilters.Value = jsontypes.NewNormalizedNull()
			} else {
				valueResult, _ := json.Marshal(presetFiltersItem.Value)
				presetFilters.Value = jsontypes.NewNormalizedValue(string(valueResult))
			}

			r.Definition.PresetFilters = append(r.Definition.PresetFilters, presetFilters)
		}
		r.Definition.Tiles = []tfTypes.Tile{}

		for _, tilesItem := range resp.Definition.Tiles {
			var tiles tfTypes.Tile

			if tilesItem.ChartTile != nil {
				tiles.Chart = &tfTypes.ChartTile{}
				if tilesItem.ChartTile.Definition.Chart.BarChart != nil {
					tiles.Chart.Definition.Chart.HorizontalBar = &tfTypes.BarChart{}
					tiles.Chart.Definition.Chart.HorizontalBar.ChartTitle = types.StringPointerValue(tilesItem.ChartTile.Definition.Chart.BarChart.ChartTitle)
					tiles.Chart.Definition.Chart.HorizontalBar.Stacked = types.BoolPointerValue(tilesItem.ChartTile.Definition.Chart.BarChart.Stacked)
					tiles.Chart.Definition.Chart.HorizontalBar.Type = types.StringValue(string(tilesItem.ChartTile.Definition.Chart.BarChart.Type))
				}
				if tilesItem.ChartTile.Definition.Chart.ChoroplethMapChart != nil {
					tiles.Chart.Definition.Chart.ChoroplethMap = &tfTypes.ChoroplethMapChart{}
					tiles.Chart.Definition.Chart.ChoroplethMap.ChartTitle = types.StringPointerValue(tilesItem.ChartTile.Definition.Chart.ChoroplethMapChart.ChartTitle)
					tiles.Chart.Definition.Chart.ChoroplethMap.Type = types.StringValue(string(tilesItem.ChartTile.Definition.Chart.ChoroplethMapChart.Type))
				}
				if tilesItem.ChartTile.Definition.Chart.DonutChart != nil {
					tiles.Chart.Definition.Chart.Donut = &tfTypes.ChoroplethMapChart{}
					tiles.Chart.Definition.Chart.Donut.ChartTitle = types.StringPointerValue(tilesItem.ChartTile.Definition.Chart.DonutChart.ChartTitle)
					tiles.Chart.Definition.Chart.Donut.Type = types.StringValue(string(tilesItem.ChartTile.Definition.Chart.DonutChart.Type))
				}
				if tilesItem.ChartTile.Definition.Chart.SingleValueChart != nil {
					tiles.Chart.Definition.Chart.SingleValue = &tfTypes.SingleValueChart{}
					tiles.Chart.Definition.Chart.SingleValue.ChartTitle = types.StringPointerValue(tilesItem.ChartTile.Definition.Chart.SingleValueChart.ChartTitle)
					tiles.Chart.Definition.Chart.SingleValue.DecimalPoints = types.Float64PointerValue(tilesItem.ChartTile.Definition.Chart.SingleValueChart.DecimalPoints)
					tiles.Chart.Definition.Chart.SingleValue.Type = types.StringValue(string(tilesItem.ChartTile.Definition.Chart.SingleValueChart.Type))
				}
				if tilesItem.ChartTile.Definition.Chart.TimeseriesChart != nil {
					tiles.Chart.Definition.Chart.TimeseriesLine = &tfTypes.BarChart{}
					tiles.Chart.Definition.Chart.TimeseriesLine.ChartTitle = types.StringPointerValue(tilesItem.ChartTile.Definition.Chart.TimeseriesChart.ChartTitle)
					tiles.Chart.Definition.Chart.TimeseriesLine.Stacked = types.BoolPointerValue(tilesItem.ChartTile.Definition.Chart.TimeseriesChart.Stacked)
					tiles.Chart.Definition.Chart.TimeseriesLine.Type = types.StringValue(string(tilesItem.ChartTile.Definition.Chart.TimeseriesChart.Type))
				}
				if tilesItem.ChartTile.Definition.Query.AdvancedQuery != nil {
					tiles.Chart.Definition.Query.APIUsage = &tfTypes.AdvancedQuery{}
					tiles.Chart.Definition.Query.APIUsage.Datasource = types.StringValue(string(tilesItem.ChartTile.Definition.Query.AdvancedQuery.Datasource))
					if tilesItem.ChartTile.Definition.Query.AdvancedQuery.Dimensions != nil {
						tiles.Chart.Definition.Query.APIUsage.Dimensions = make([]types.String, 0, len(tilesItem.ChartTile.Definition.Query.AdvancedQuery.Dimensions))
						for _, v := range tilesItem.ChartTile.Definition.Query.AdvancedQuery.Dimensions {
							tiles.Chart.Definition.Query.APIUsage.Dimensions = append(tiles.Chart.Definition.Query.APIUsage.Dimensions, types.StringValue(string(v)))
						}
					}
					tiles.Chart.Definition.Query.APIUsage.Filters = []tfTypes.AllFilterItems{}

					for _, filtersItem := range tilesItem.ChartTile.Definition.Query.AdvancedQuery.Filters {
						var filters tfTypes.AllFilterItems

						filters.Field = types.StringValue(string(filtersItem.Field))
						filters.Operator = types.StringValue(string(filtersItem.Operator))
						if filtersItem.Value == nil {
							filters.Value = jsontypes.NewNormalizedNull()
						} else {
							valueResult1, _ := json.Marshal(filtersItem.Value)
							filters.Value = jsontypes.NewNormalizedValue(string(valueResult1))
						}

						tiles.Chart.Definition.Query.APIUsage.Filters = append(tiles.Chart.Definition.Query.APIUsage.Filters, filters)
					}
					if tilesItem.ChartTile.Definition.Query.AdvancedQuery.Granularity != nil {
						tiles.Chart.Definition.Query.APIUsage.Granularity = types.StringValue(string(*tilesItem.ChartTile.Definition.Query.AdvancedQuery.Granularity))
					} else {
						tiles.Chart.Definition.Query.APIUsage.Granularity = types.StringNull()
					}
					tiles.Chart.Definition.Query.APIUsage.Metrics = make([]types.String, 0, len(tilesItem.ChartTile.Definition.Query.AdvancedQuery.Metrics))
					for _, v := range tilesItem.ChartTile.Definition.Query.AdvancedQuery.Metrics {
						tiles.Chart.Definition.Query.APIUsage.Metrics = append(tiles.Chart.Definition.Query.APIUsage.Metrics, types.StringValue(string(v)))
					}
					if tilesItem.ChartTile.Definition.Query.AdvancedQuery.TimeRange != nil {
						tiles.Chart.Definition.Query.APIUsage.TimeRange = &tfTypes.TimeRange{}
						if tilesItem.ChartTile.Definition.Query.AdvancedQuery.TimeRange.MetricsAbsoluteTimeRangeDtoV2 != nil {
							tiles.Chart.Definition.Query.APIUsage.TimeRange.Absolute = &tfTypes.MetricsAbsoluteTimeRangeDtoV2{}
							tiles.Chart.Definition.Query.APIUsage.TimeRange.Absolute.End = types.StringPointerValue(typeconvert.TimePointerToStringPointer(tilesItem.ChartTile.Definition.Query.AdvancedQuery.TimeRange.MetricsAbsoluteTimeRangeDtoV2.End))
							tiles.Chart.Definition.Query.APIUsage.TimeRange.Absolute.Start = types.StringPointerValue(typeconvert.TimePointerToStringPointer(tilesItem.ChartTile.Definition.Query.AdvancedQuery.TimeRange.MetricsAbsoluteTimeRangeDtoV2.Start))
							tiles.Chart.Definition.Query.APIUsage.TimeRange.Absolute.Type = types.StringValue(string(tilesItem.ChartTile.Definition.Query.AdvancedQuery.TimeRange.MetricsAbsoluteTimeRangeDtoV2.Type))
							tiles.Chart.Definition.Query.APIUsage.TimeRange.Absolute.Tz = types.StringPointerValue(tilesItem.ChartTile.Definition.Query.AdvancedQuery.TimeRange.MetricsAbsoluteTimeRangeDtoV2.Tz)
						}
						if tilesItem.ChartTile.Definition.Query.AdvancedQuery.TimeRange.MetricsRelativeTimeRangeDtoV2 != nil {
							tiles.Chart.Definition.Query.APIUsage.TimeRange.Relative = &tfTypes.MetricsRelativeTimeRangeDtoV2{}
							if tilesItem.ChartTile.Definition.Query.AdvancedQuery.TimeRange.MetricsRelativeTimeRangeDtoV2.TimeRange != nil {
								tiles.Chart.Definition.Query.APIUsage.TimeRange.Relative.TimeRange = types.StringValue(string(*tilesItem.ChartTile.Definition.Query.AdvancedQuery.TimeRange.MetricsRelativeTimeRangeDtoV2.TimeRange))
							} else {
								tiles.Chart.Definition.Query.APIUsage.TimeRange.Relative.TimeRange = types.StringNull()
							}
							tiles.Chart.Definition.Query.APIUsage.TimeRange.Relative.Type = types.StringValue(string(tilesItem.ChartTile.Definition.Query.AdvancedQuery.TimeRange.MetricsRelativeTimeRangeDtoV2.Type))
							tiles.Chart.Definition.Query.APIUsage.TimeRange.Relative.Tz = types.StringPointerValue(tilesItem.ChartTile.Definition.Query.AdvancedQuery.TimeRange.MetricsRelativeTimeRangeDtoV2.Tz)
						}
					}
				}
				if tilesItem.ChartTile.Definition.Query.LLMQuery != nil {
					tiles.Chart.Definition.Query.LlmUsage = &tfTypes.AdvancedQuery{}
					tiles.Chart.Definition.Query.LlmUsage.Datasource = types.StringValue(string(tilesItem.ChartTile.Definition.Query.LLMQuery.Datasource))
					if tilesItem.ChartTile.Definition.Query.LLMQuery.Dimensions != nil {
						tiles.Chart.Definition.Query.LlmUsage.Dimensions = make([]types.String, 0, len(tilesItem.ChartTile.Definition.Query.LLMQuery.Dimensions))
						for _, v := range tilesItem.ChartTile.Definition.Query.LLMQuery.Dimensions {
							tiles.Chart.Definition.Query.LlmUsage.Dimensions = append(tiles.Chart.Definition.Query.LlmUsage.Dimensions, types.StringValue(string(v)))
						}
					}
					tiles.Chart.Definition.Query.LlmUsage.Filters = []tfTypes.AllFilterItems{}

					for _, filtersItem1 := range tilesItem.ChartTile.Definition.Query.LLMQuery.Filters {
						var filters1 tfTypes.AllFilterItems

						filters1.Field = types.StringValue(string(filtersItem1.Field))
						filters1.Operator = types.StringValue(string(filtersItem1.Operator))
						if filtersItem1.Value == nil {
							filters1.Value = jsontypes.NewNormalizedNull()
						} else {
							valueResult2, _ := json.Marshal(filtersItem1.Value)
							filters1.Value = jsontypes.NewNormalizedValue(string(valueResult2))
						}

						tiles.Chart.Definition.Query.LlmUsage.Filters = append(tiles.Chart.Definition.Query.LlmUsage.Filters, filters1)
					}
					if tilesItem.ChartTile.Definition.Query.LLMQuery.Granularity != nil {
						tiles.Chart.Definition.Query.LlmUsage.Granularity = types.StringValue(string(*tilesItem.ChartTile.Definition.Query.LLMQuery.Granularity))
					} else {
						tiles.Chart.Definition.Query.LlmUsage.Granularity = types.StringNull()
					}
					tiles.Chart.Definition.Query.LlmUsage.Metrics = make([]types.String, 0, len(tilesItem.ChartTile.Definition.Query.LLMQuery.Metrics))
					for _, v := range tilesItem.ChartTile.Definition.Query.LLMQuery.Metrics {
						tiles.Chart.Definition.Query.LlmUsage.Metrics = append(tiles.Chart.Definition.Query.LlmUsage.Metrics, types.StringValue(string(v)))
					}
					if tilesItem.ChartTile.Definition.Query.LLMQuery.TimeRange != nil {
						tiles.Chart.Definition.Query.LlmUsage.TimeRange = &tfTypes.TimeRange{}
						if tilesItem.ChartTile.Definition.Query.LLMQuery.TimeRange.MetricsAbsoluteTimeRangeDtoV2 != nil {
							tiles.Chart.Definition.Query.LlmUsage.TimeRange.Absolute = &tfTypes.MetricsAbsoluteTimeRangeDtoV2{}
							tiles.Chart.Definition.Query.LlmUsage.TimeRange.Absolute.End = types.StringPointerValue(typeconvert.TimePointerToStringPointer(tilesItem.ChartTile.Definition.Query.LLMQuery.TimeRange.MetricsAbsoluteTimeRangeDtoV2.End))
							tiles.Chart.Definition.Query.LlmUsage.TimeRange.Absolute.Start = types.StringPointerValue(typeconvert.TimePointerToStringPointer(tilesItem.ChartTile.Definition.Query.LLMQuery.TimeRange.MetricsAbsoluteTimeRangeDtoV2.Start))
							tiles.Chart.Definition.Query.LlmUsage.TimeRange.Absolute.Type = types.StringValue(string(tilesItem.ChartTile.Definition.Query.LLMQuery.TimeRange.MetricsAbsoluteTimeRangeDtoV2.Type))
							tiles.Chart.Definition.Query.LlmUsage.TimeRange.Absolute.Tz = types.StringPointerValue(tilesItem.ChartTile.Definition.Query.LLMQuery.TimeRange.MetricsAbsoluteTimeRangeDtoV2.Tz)
						}
						if tilesItem.ChartTile.Definition.Query.LLMQuery.TimeRange.MetricsRelativeTimeRangeDtoV2 != nil {
							tiles.Chart.Definition.Query.LlmUsage.TimeRange.Relative = &tfTypes.MetricsRelativeTimeRangeDtoV2{}
							if tilesItem.ChartTile.Definition.Query.LLMQuery.TimeRange.MetricsRelativeTimeRangeDtoV2.TimeRange != nil {
								tiles.Chart.Definition.Query.LlmUsage.TimeRange.Relative.TimeRange = types.StringValue(string(*tilesItem.ChartTile.Definition.Query.LLMQuery.TimeRange.MetricsRelativeTimeRangeDtoV2.TimeRange))
							} else {
								tiles.Chart.Definition.Query.LlmUsage.TimeRange.Relative.TimeRange = types.StringNull()
							}
							tiles.Chart.Definition.Query.LlmUsage.TimeRange.Relative.Type = types.StringValue(string(tilesItem.ChartTile.Definition.Query.LLMQuery.TimeRange.MetricsRelativeTimeRangeDtoV2.Type))
							tiles.Chart.Definition.Query.LlmUsage.TimeRange.Relative.Tz = types.StringPointerValue(tilesItem.ChartTile.Definition.Query.LLMQuery.TimeRange.MetricsRelativeTimeRangeDtoV2.Tz)
						}
					}
				}
				tiles.Chart.Layout.Position.Col = types.Int64Value(tilesItem.ChartTile.Layout.Position.Col)
				tiles.Chart.Layout.Position.Row = types.Int64Value(tilesItem.ChartTile.Layout.Position.Row)
				tiles.Chart.Layout.Size.Cols = types.Int64Value(tilesItem.ChartTile.Layout.Size.Cols)
				tiles.Chart.Layout.Size.Rows = types.Int64Value(tilesItem.ChartTile.Layout.Size.Rows)
				tiles.Chart.Type = types.StringValue(string(tilesItem.ChartTile.Type))
			}

			r.Definition.Tiles = append(r.Definition.Tiles, tiles)
		}
		r.ID = types.StringPointerValue(resp.ID)
		if len(resp.Labels) > 0 {
			r.Labels = make(map[string]types.String, len(resp.Labels))
			for key, value := range resp.Labels {
				r.Labels[key] = types.StringPointerValue(value)
			}
		}
		r.Name = types.StringValue(resp.Name)
		r.UpdatedAt = types.StringPointerValue(typeconvert.TimePointerToStringPointer(resp.UpdatedAt))
	}

	return diags
}

func (r *DashboardResourceModel) ToOperationsDashboardsDeleteRequest(ctx context.Context) (*operations.DashboardsDeleteRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var dashboardID string
	dashboardID = r.ID.ValueString()

	out := operations.DashboardsDeleteRequest{
		DashboardID: dashboardID,
	}

	return &out, diags
}

func (r *DashboardResourceModel) ToOperationsDashboardsGetRequest(ctx context.Context) (*operations.DashboardsGetRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var dashboardID string
	dashboardID = r.ID.ValueString()

	out := operations.DashboardsGetRequest{
		DashboardID: dashboardID,
	}

	return &out, diags
}

func (r *DashboardResourceModel) ToOperationsDashboardsUpdateRequest(ctx context.Context) (*operations.DashboardsUpdateRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var dashboardID string
	dashboardID = r.ID.ValueString()

	dashboardUpdateRequest, dashboardUpdateRequestDiags := r.ToSharedDashboardUpdateRequest(ctx)
	diags.Append(dashboardUpdateRequestDiags...)

	if diags.HasError() {
		return nil, diags
	}

	out := operations.DashboardsUpdateRequest{
		DashboardID:            dashboardID,
		DashboardUpdateRequest: *dashboardUpdateRequest,
	}

	return &out, diags
}

func (r *DashboardResourceModel) ToSharedDashboardUpdateRequest(ctx context.Context) (*shared.DashboardUpdateRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var name string
	name = r.Name.ValueString()

	tiles := make([]shared.Tile, 0, len(r.Definition.Tiles))
	for tilesItem := range r.Definition.Tiles {
		if r.Definition.Tiles[tilesItem].Chart != nil {
			var col int64
			col = r.Definition.Tiles[tilesItem].Chart.Layout.Position.Col.ValueInt64()

			var row int64
			row = r.Definition.Tiles[tilesItem].Chart.Layout.Position.Row.ValueInt64()

			position := shared.Position{
				Col: col,
				Row: row,
			}
			var cols int64
			cols = r.Definition.Tiles[tilesItem].Chart.Layout.Size.Cols.ValueInt64()

			var rows int64
			rows = r.Definition.Tiles[tilesItem].Chart.Layout.Size.Rows.ValueInt64()

			size := shared.Size{
				Cols: cols,
				Rows: rows,
			}
			layout := shared.Layout{
				Position: position,
				Size:     size,
			}
			typeVar := shared.ChartTileType(r.Definition.Tiles[tilesItem].Chart.Type.ValueString())
			var query shared.Query
			var advancedQuery *shared.AdvancedQuery
			if r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage != nil {
				datasource := shared.Datasource(r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.Datasource.ValueString())
				metrics := make([]shared.AdvancedMetrics, 0, len(r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.Metrics))
				for _, metricsItem := range r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.Metrics {
					metrics = append(metrics, shared.AdvancedMetrics(metricsItem.ValueString()))
				}
				var dimensions []shared.Dimensions
				if r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.Dimensions != nil {
					dimensions = make([]shared.Dimensions, 0, len(r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.Dimensions))
					for _, dimensionsItem := range r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.Dimensions {
						dimensions = append(dimensions, shared.Dimensions(dimensionsItem.ValueString()))
					}
				}
				filters := make([]shared.AdvancedFilters, 0, len(r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.Filters))
				for filtersIndex := range r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.Filters {
					field := shared.Field(r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.Filters[filtersIndex].Field.ValueString())
					operator := shared.Operator(r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.Filters[filtersIndex].Operator.ValueString())
					var value interface{}
					if !r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.Filters[filtersIndex].Value.IsUnknown() && !r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.Filters[filtersIndex].Value.IsNull() {
						_ = json.Unmarshal([]byte(r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.Filters[filtersIndex].Value.ValueString()), &value)
					}
					filters = append(filters, shared.AdvancedFilters{
						Field:    field,
						Operator: operator,
						Value:    value,
					})
				}
				granularity := new(shared.Granularity)
				if !r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.Granularity.IsUnknown() && !r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.Granularity.IsNull() {
					*granularity = shared.Granularity(r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.Granularity.ValueString())
				} else {
					granularity = nil
				}
				var timeRange *shared.TimeRange
				if r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.TimeRange != nil {
					var metricsRelativeTimeRangeDtoV2 *shared.MetricsRelativeTimeRangeDtoV2
					if r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.TimeRange.Relative != nil {
						tz := new(string)
						if !r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.TimeRange.Relative.Tz.IsUnknown() && !r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.TimeRange.Relative.Tz.IsNull() {
							*tz = r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.TimeRange.Relative.Tz.ValueString()
						} else {
							tz = nil
						}
						typeVar1 := shared.MetricsRelativeTimeRangeDtoV2Type(r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.TimeRange.Relative.Type.ValueString())
						timeRange1 := new(shared.MetricsRelativeTimeRangeDtoV2TimeRange)
						if !r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.TimeRange.Relative.TimeRange.IsUnknown() && !r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.TimeRange.Relative.TimeRange.IsNull() {
							*timeRange1 = shared.MetricsRelativeTimeRangeDtoV2TimeRange(r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.TimeRange.Relative.TimeRange.ValueString())
						} else {
							timeRange1 = nil
						}
						metricsRelativeTimeRangeDtoV2 = &shared.MetricsRelativeTimeRangeDtoV2{
							Tz:        tz,
							Type:      typeVar1,
							TimeRange: timeRange1,
						}
					}
					if metricsRelativeTimeRangeDtoV2 != nil {
						timeRange = &shared.TimeRange{
							MetricsRelativeTimeRangeDtoV2: metricsRelativeTimeRangeDtoV2,
						}
					}
					var metricsAbsoluteTimeRangeDtoV2 *shared.MetricsAbsoluteTimeRangeDtoV2
					if r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.TimeRange.Absolute != nil {
						tz1 := new(string)
						if !r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.TimeRange.Absolute.Tz.IsUnknown() && !r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.TimeRange.Absolute.Tz.IsNull() {
							*tz1 = r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.TimeRange.Absolute.Tz.ValueString()
						} else {
							tz1 = nil
						}
						typeVar2 := shared.MetricsAbsoluteTimeRangeDtoV2Type(r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.TimeRange.Absolute.Type.ValueString())
						start := new(time.Time)
						if !r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.TimeRange.Absolute.Start.IsUnknown() && !r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.TimeRange.Absolute.Start.IsNull() {
							*start, _ = time.Parse(time.RFC3339Nano, r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.TimeRange.Absolute.Start.ValueString())
						} else {
							start = nil
						}
						end := new(time.Time)
						if !r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.TimeRange.Absolute.End.IsUnknown() && !r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.TimeRange.Absolute.End.IsNull() {
							*end, _ = time.Parse(time.RFC3339Nano, r.Definition.Tiles[tilesItem].Chart.Definition.Query.APIUsage.TimeRange.Absolute.End.ValueString())
						} else {
							end = nil
						}
						metricsAbsoluteTimeRangeDtoV2 = &shared.MetricsAbsoluteTimeRangeDtoV2{
							Tz:    tz1,
							Type:  typeVar2,
							Start: start,
							End:   end,
						}
					}
					if metricsAbsoluteTimeRangeDtoV2 != nil {
						timeRange = &shared.TimeRange{
							MetricsAbsoluteTimeRangeDtoV2: metricsAbsoluteTimeRangeDtoV2,
						}
					}
				}
				advancedQuery = &shared.AdvancedQuery{
					Datasource:  datasource,
					Metrics:     metrics,
					Dimensions:  dimensions,
					Filters:     filters,
					Granularity: granularity,
					TimeRange:   timeRange,
				}
			}
			if advancedQuery != nil {
				query = shared.Query{
					AdvancedQuery: advancedQuery,
				}
			}
			var llmQuery *shared.LLMQuery
			if r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage != nil {
				datasource1 := shared.LLMQueryDatasource(r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.Datasource.ValueString())
				metrics1 := make([]shared.LLMMetrics, 0, len(r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.Metrics))
				for _, metricsItem1 := range r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.Metrics {
					metrics1 = append(metrics1, shared.LLMMetrics(metricsItem1.ValueString()))
				}
				var dimensions1 []shared.LLMQueryDimensions
				if r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.Dimensions != nil {
					dimensions1 = make([]shared.LLMQueryDimensions, 0, len(r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.Dimensions))
					for _, dimensionsItem1 := range r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.Dimensions {
						dimensions1 = append(dimensions1, shared.LLMQueryDimensions(dimensionsItem1.ValueString()))
					}
				}
				filters1 := make([]shared.LLMFilters, 0, len(r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.Filters))
				for filtersIndex1 := range r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.Filters {
					field1 := shared.LLMFiltersField(r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.Filters[filtersIndex1].Field.ValueString())
					operator1 := shared.LLMFiltersOperator(r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.Filters[filtersIndex1].Operator.ValueString())
					var value1 interface{}
					if !r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.Filters[filtersIndex1].Value.IsUnknown() && !r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.Filters[filtersIndex1].Value.IsNull() {
						_ = json.Unmarshal([]byte(r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.Filters[filtersIndex1].Value.ValueString()), &value1)
					}
					filters1 = append(filters1, shared.LLMFilters{
						Field:    field1,
						Operator: operator1,
						Value:    value1,
					})
				}
				granularity1 := new(shared.Granularity)
				if !r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.Granularity.IsUnknown() && !r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.Granularity.IsNull() {
					*granularity1 = shared.Granularity(r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.Granularity.ValueString())
				} else {
					granularity1 = nil
				}
				var timeRange2 *shared.TimeRange
				if r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.TimeRange != nil {
					var metricsRelativeTimeRangeDtoV21 *shared.MetricsRelativeTimeRangeDtoV2
					if r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.TimeRange.Relative != nil {
						tz2 := new(string)
						if !r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.TimeRange.Relative.Tz.IsUnknown() && !r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.TimeRange.Relative.Tz.IsNull() {
							*tz2 = r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.TimeRange.Relative.Tz.ValueString()
						} else {
							tz2 = nil
						}
						typeVar3 := shared.MetricsRelativeTimeRangeDtoV2Type(r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.TimeRange.Relative.Type.ValueString())
						timeRange3 := new(shared.MetricsRelativeTimeRangeDtoV2TimeRange)
						if !r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.TimeRange.Relative.TimeRange.IsUnknown() && !r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.TimeRange.Relative.TimeRange.IsNull() {
							*timeRange3 = shared.MetricsRelativeTimeRangeDtoV2TimeRange(r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.TimeRange.Relative.TimeRange.ValueString())
						} else {
							timeRange3 = nil
						}
						metricsRelativeTimeRangeDtoV21 = &shared.MetricsRelativeTimeRangeDtoV2{
							Tz:        tz2,
							Type:      typeVar3,
							TimeRange: timeRange3,
						}
					}
					if metricsRelativeTimeRangeDtoV21 != nil {
						timeRange2 = &shared.TimeRange{
							MetricsRelativeTimeRangeDtoV2: metricsRelativeTimeRangeDtoV21,
						}
					}
					var metricsAbsoluteTimeRangeDtoV21 *shared.MetricsAbsoluteTimeRangeDtoV2
					if r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.TimeRange.Absolute != nil {
						tz3 := new(string)
						if !r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.TimeRange.Absolute.Tz.IsUnknown() && !r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.TimeRange.Absolute.Tz.IsNull() {
							*tz3 = r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.TimeRange.Absolute.Tz.ValueString()
						} else {
							tz3 = nil
						}
						typeVar4 := shared.MetricsAbsoluteTimeRangeDtoV2Type(r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.TimeRange.Absolute.Type.ValueString())
						start1 := new(time.Time)
						if !r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.TimeRange.Absolute.Start.IsUnknown() && !r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.TimeRange.Absolute.Start.IsNull() {
							*start1, _ = time.Parse(time.RFC3339Nano, r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.TimeRange.Absolute.Start.ValueString())
						} else {
							start1 = nil
						}
						end1 := new(time.Time)
						if !r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.TimeRange.Absolute.End.IsUnknown() && !r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.TimeRange.Absolute.End.IsNull() {
							*end1, _ = time.Parse(time.RFC3339Nano, r.Definition.Tiles[tilesItem].Chart.Definition.Query.LlmUsage.TimeRange.Absolute.End.ValueString())
						} else {
							end1 = nil
						}
						metricsAbsoluteTimeRangeDtoV21 = &shared.MetricsAbsoluteTimeRangeDtoV2{
							Tz:    tz3,
							Type:  typeVar4,
							Start: start1,
							End:   end1,
						}
					}
					if metricsAbsoluteTimeRangeDtoV21 != nil {
						timeRange2 = &shared.TimeRange{
							MetricsAbsoluteTimeRangeDtoV2: metricsAbsoluteTimeRangeDtoV21,
						}
					}
				}
				llmQuery = &shared.LLMQuery{
					Datasource:  datasource1,
					Metrics:     metrics1,
					Dimensions:  dimensions1,
					Filters:     filters1,
					Granularity: granularity1,
					TimeRange:   timeRange2,
				}
			}
			if llmQuery != nil {
				query = shared.Query{
					LLMQuery: llmQuery,
				}
			}
			var chart shared.Chart
			var donutChart *shared.DonutChart
			if r.Definition.Tiles[tilesItem].Chart.Definition.Chart.Donut != nil {
				chartTitle := new(string)
				if !r.Definition.Tiles[tilesItem].Chart.Definition.Chart.Donut.ChartTitle.IsUnknown() && !r.Definition.Tiles[tilesItem].Chart.Definition.Chart.Donut.ChartTitle.IsNull() {
					*chartTitle = r.Definition.Tiles[tilesItem].Chart.Definition.Chart.Donut.ChartTitle.ValueString()
				} else {
					chartTitle = nil
				}
				typeVar5 := shared.DonutChartType(r.Definition.Tiles[tilesItem].Chart.Definition.Chart.Donut.Type.ValueString())
				donutChart = &shared.DonutChart{
					ChartTitle: chartTitle,
					Type:       typeVar5,
				}
			}
			if donutChart != nil {
				chart = shared.Chart{
					DonutChart: donutChart,
				}
			}
			var timeseriesChart *shared.TimeseriesChart
			if r.Definition.Tiles[tilesItem].Chart.Definition.Chart.TimeseriesLine != nil {
				chartTitle1 := new(string)
				if !r.Definition.Tiles[tilesItem].Chart.Definition.Chart.TimeseriesLine.ChartTitle.IsUnknown() && !r.Definition.Tiles[tilesItem].Chart.Definition.Chart.TimeseriesLine.ChartTitle.IsNull() {
					*chartTitle1 = r.Definition.Tiles[tilesItem].Chart.Definition.Chart.TimeseriesLine.ChartTitle.ValueString()
				} else {
					chartTitle1 = nil
				}
				typeVar6 := shared.TimeseriesChartType(r.Definition.Tiles[tilesItem].Chart.Definition.Chart.TimeseriesLine.Type.ValueString())
				stacked := new(bool)
				if !r.Definition.Tiles[tilesItem].Chart.Definition.Chart.TimeseriesLine.Stacked.IsUnknown() && !r.Definition.Tiles[tilesItem].Chart.Definition.Chart.TimeseriesLine.Stacked.IsNull() {
					*stacked = r.Definition.Tiles[tilesItem].Chart.Definition.Chart.TimeseriesLine.Stacked.ValueBool()
				} else {
					stacked = nil
				}
				timeseriesChart = &shared.TimeseriesChart{
					ChartTitle: chartTitle1,
					Type:       typeVar6,
					Stacked:    stacked,
				}
			}
			if timeseriesChart != nil {
				chart = shared.Chart{
					TimeseriesChart: timeseriesChart,
				}
			}
			var barChart *shared.BarChart
			if r.Definition.Tiles[tilesItem].Chart.Definition.Chart.HorizontalBar != nil {
				chartTitle2 := new(string)
				if !r.Definition.Tiles[tilesItem].Chart.Definition.Chart.HorizontalBar.ChartTitle.IsUnknown() && !r.Definition.Tiles[tilesItem].Chart.Definition.Chart.HorizontalBar.ChartTitle.IsNull() {
					*chartTitle2 = r.Definition.Tiles[tilesItem].Chart.Definition.Chart.HorizontalBar.ChartTitle.ValueString()
				} else {
					chartTitle2 = nil
				}
				typeVar7 := shared.BarChartType(r.Definition.Tiles[tilesItem].Chart.Definition.Chart.HorizontalBar.Type.ValueString())
				stacked1 := new(bool)
				if !r.Definition.Tiles[tilesItem].Chart.Definition.Chart.HorizontalBar.Stacked.IsUnknown() && !r.Definition.Tiles[tilesItem].Chart.Definition.Chart.HorizontalBar.Stacked.IsNull() {
					*stacked1 = r.Definition.Tiles[tilesItem].Chart.Definition.Chart.HorizontalBar.Stacked.ValueBool()
				} else {
					stacked1 = nil
				}
				barChart = &shared.BarChart{
					ChartTitle: chartTitle2,
					Type:       typeVar7,
					Stacked:    stacked1,
				}
			}
			if barChart != nil {
				chart = shared.Chart{
					BarChart: barChart,
				}
			}
			var singleValueChart *shared.SingleValueChart
			if r.Definition.Tiles[tilesItem].Chart.Definition.Chart.SingleValue != nil {
				chartTitle3 := new(string)
				if !r.Definition.Tiles[tilesItem].Chart.Definition.Chart.SingleValue.ChartTitle.IsUnknown() && !r.Definition.Tiles[tilesItem].Chart.Definition.Chart.SingleValue.ChartTitle.IsNull() {
					*chartTitle3 = r.Definition.Tiles[tilesItem].Chart.Definition.Chart.SingleValue.ChartTitle.ValueString()
				} else {
					chartTitle3 = nil
				}
				typeVar8 := shared.SingleValueChartType(r.Definition.Tiles[tilesItem].Chart.Definition.Chart.SingleValue.Type.ValueString())
				decimalPoints := new(float64)
				if !r.Definition.Tiles[tilesItem].Chart.Definition.Chart.SingleValue.DecimalPoints.IsUnknown() && !r.Definition.Tiles[tilesItem].Chart.Definition.Chart.SingleValue.DecimalPoints.IsNull() {
					*decimalPoints = r.Definition.Tiles[tilesItem].Chart.Definition.Chart.SingleValue.DecimalPoints.ValueFloat64()
				} else {
					decimalPoints = nil
				}
				singleValueChart = &shared.SingleValueChart{
					ChartTitle:    chartTitle3,
					Type:          typeVar8,
					DecimalPoints: decimalPoints,
				}
			}
			if singleValueChart != nil {
				chart = shared.Chart{
					SingleValueChart: singleValueChart,
				}
			}
			var choroplethMapChart *shared.ChoroplethMapChart
			if r.Definition.Tiles[tilesItem].Chart.Definition.Chart.ChoroplethMap != nil {
				chartTitle4 := new(string)
				if !r.Definition.Tiles[tilesItem].Chart.Definition.Chart.ChoroplethMap.ChartTitle.IsUnknown() && !r.Definition.Tiles[tilesItem].Chart.Definition.Chart.ChoroplethMap.ChartTitle.IsNull() {
					*chartTitle4 = r.Definition.Tiles[tilesItem].Chart.Definition.Chart.ChoroplethMap.ChartTitle.ValueString()
				} else {
					chartTitle4 = nil
				}
				typeVar9 := shared.ChoroplethMapChartType(r.Definition.Tiles[tilesItem].Chart.Definition.Chart.ChoroplethMap.Type.ValueString())
				choroplethMapChart = &shared.ChoroplethMapChart{
					ChartTitle: chartTitle4,
					Type:       typeVar9,
				}
			}
			if choroplethMapChart != nil {
				chart = shared.Chart{
					ChoroplethMapChart: choroplethMapChart,
				}
			}
			definition1 := shared.Definition{
				Query: query,
				Chart: chart,
			}
			chartTile := shared.ChartTile{
				Layout:     layout,
				Type:       typeVar,
				Definition: definition1,
			}
			tiles = append(tiles, shared.Tile{
				ChartTile: &chartTile,
			})
		}
	}
	presetFilters := make([]shared.AllFilterItems, 0, len(r.Definition.PresetFilters))
	for presetFiltersIndex := range r.Definition.PresetFilters {
		field2 := shared.AllFilterItemsField(r.Definition.PresetFilters[presetFiltersIndex].Field.ValueString())
		operator2 := shared.AllFilterItemsOperator(r.Definition.PresetFilters[presetFiltersIndex].Operator.ValueString())
		var value2 interface{}
		if !r.Definition.PresetFilters[presetFiltersIndex].Value.IsUnknown() && !r.Definition.PresetFilters[presetFiltersIndex].Value.IsNull() {
			_ = json.Unmarshal([]byte(r.Definition.PresetFilters[presetFiltersIndex].Value.ValueString()), &value2)
		}
		presetFilters = append(presetFilters, shared.AllFilterItems{
			Field:    field2,
			Operator: operator2,
			Value:    value2,
		})
	}
	definition := shared.Dashboard{
		Tiles:         tiles,
		PresetFilters: presetFilters,
	}
	labels := make(map[string]*string)
	for labelsKey := range r.Labels {
		labelsInst := new(string)
		if !r.Labels[labelsKey].IsUnknown() && !r.Labels[labelsKey].IsNull() {
			*labelsInst = r.Labels[labelsKey].ValueString()
		} else {
			labelsInst = nil
		}
		labels[labelsKey] = labelsInst
	}
	out := shared.DashboardUpdateRequest{
		Name:       name,
		Definition: definition,
		Labels:     labels,
	}

	return &out, diags
}
