// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package provider

import (
	"context"
	"github.com/hashicorp/terraform-plugin-framework/diag"
	"github.com/hashicorp/terraform-plugin-framework/types"
	"github.com/kong/terraform-provider-konnect-beta/internal/provider/typeconvert"
	tfTypes "github.com/kong/terraform-provider-konnect-beta/internal/provider/types"
	"github.com/kong/terraform-provider-konnect-beta/internal/sdk/models/operations"
	"github.com/kong/terraform-provider-konnect-beta/internal/sdk/models/shared"
)

func (r *EventGatewayVirtualClusterResourceModel) RefreshFromSharedVirtualCluster(ctx context.Context, resp *shared.VirtualCluster) diag.Diagnostics {
	var diags diag.Diagnostics

	if resp != nil {
		r.Authentication = []tfTypes.VirtualClusterAuthenticationScheme{}

		for _, authenticationItem := range resp.Authentication {
			var authentication tfTypes.VirtualClusterAuthenticationScheme

			if authenticationItem.VirtualClusterAuthenticationAnonymous != nil {
				authentication.Anonymous = &tfTypes.BackendClusterAuthenticationAnonymous{}
				authentication.Anonymous.Type = types.StringValue(string(authenticationItem.VirtualClusterAuthenticationAnonymous.Type))
			}
			if authenticationItem.VirtualClusterAuthenticationOauthBearer != nil {
				authentication.OauthBearer = &tfTypes.VirtualClusterAuthenticationOauthBearer{}
				if authenticationItem.VirtualClusterAuthenticationOauthBearer.ClaimsMapping == nil {
					authentication.OauthBearer.ClaimsMapping = nil
				} else {
					authentication.OauthBearer.ClaimsMapping = &tfTypes.VirtualClusterAuthenticationClaimsMapping{}
					authentication.OauthBearer.ClaimsMapping.Scope = types.StringPointerValue(authenticationItem.VirtualClusterAuthenticationOauthBearer.ClaimsMapping.Scope)
					authentication.OauthBearer.ClaimsMapping.Sub = types.StringPointerValue(authenticationItem.VirtualClusterAuthenticationOauthBearer.ClaimsMapping.Sub)
				}
				if authenticationItem.VirtualClusterAuthenticationOauthBearer.Jwks == nil {
					authentication.OauthBearer.Jwks = nil
				} else {
					authentication.OauthBearer.Jwks = &tfTypes.VirtualClusterAuthenticationJWKS{}
					authentication.OauthBearer.Jwks.CacheExpiration = types.StringPointerValue(authenticationItem.VirtualClusterAuthenticationOauthBearer.Jwks.CacheExpiration)
					authentication.OauthBearer.Jwks.Endpoint = types.StringValue(authenticationItem.VirtualClusterAuthenticationOauthBearer.Jwks.Endpoint)
					authentication.OauthBearer.Jwks.Timeout = types.StringPointerValue(authenticationItem.VirtualClusterAuthenticationOauthBearer.Jwks.Timeout)
				}
				authentication.OauthBearer.Mediation = types.StringValue(string(authenticationItem.VirtualClusterAuthenticationOauthBearer.Mediation))
				authentication.OauthBearer.Type = types.StringValue(string(authenticationItem.VirtualClusterAuthenticationOauthBearer.Type))
				if authenticationItem.VirtualClusterAuthenticationOauthBearer.Validate == nil {
					authentication.OauthBearer.Validate = nil
				} else {
					authentication.OauthBearer.Validate = &tfTypes.VirtualClusterAuthenticationValidate{}
					if authenticationItem.VirtualClusterAuthenticationOauthBearer.Validate.Audiences != nil {
						authentication.OauthBearer.Validate.Audiences = []tfTypes.VirtualClusterReferenceByName{}

						for _, audiencesItem := range authenticationItem.VirtualClusterAuthenticationOauthBearer.Validate.Audiences {
							var audiences tfTypes.VirtualClusterReferenceByName

							audiences.Name = types.StringValue(audiencesItem.Name)

							authentication.OauthBearer.Validate.Audiences = append(authentication.OauthBearer.Validate.Audiences, audiences)
						}
					}
					authentication.OauthBearer.Validate.Issuer = types.StringPointerValue(authenticationItem.VirtualClusterAuthenticationOauthBearer.Validate.Issuer)
				}
			}
			if authenticationItem.VirtualClusterAuthenticationSaslPlain != nil {
				authentication.SaslPlain = &tfTypes.VirtualClusterAuthenticationSaslPlain{}
				authentication.SaslPlain.Mediation = types.StringValue(string(authenticationItem.VirtualClusterAuthenticationSaslPlain.Mediation))
				if authenticationItem.VirtualClusterAuthenticationSaslPlain.Principals != nil {
					authentication.SaslPlain.Principals = []tfTypes.VirtualClusterAuthenticationPrincipal{}

					for _, principalsItem := range authenticationItem.VirtualClusterAuthenticationSaslPlain.Principals {
						var principals tfTypes.VirtualClusterAuthenticationPrincipal

						principals.Password = types.StringPointerValue(principalsItem.Password)
						principals.Username = types.StringPointerValue(principalsItem.Username)

						authentication.SaslPlain.Principals = append(authentication.SaslPlain.Principals, principals)
					}
				}
				authentication.SaslPlain.Type = types.StringValue(string(authenticationItem.VirtualClusterAuthenticationSaslPlain.Type))
			}
			if authenticationItem.VirtualClusterAuthenticationSaslScram != nil {
				authentication.SaslScram = &tfTypes.VirtualClusterAuthenticationSaslScram{}
				authentication.SaslScram.Algorithm = types.StringValue(string(authenticationItem.VirtualClusterAuthenticationSaslScram.Algorithm))
				authentication.SaslScram.Type = types.StringValue(string(authenticationItem.VirtualClusterAuthenticationSaslScram.Type))
			}

			r.Authentication = append(r.Authentication, authentication)
		}
		r.CreatedAt = types.StringValue(typeconvert.TimeToString(resp.CreatedAt))
		r.Description = types.StringPointerValue(resp.Description)
		r.Destination.ID = types.StringValue(resp.Destination.ID)
		r.Destination.Name = types.StringValue(resp.Destination.Name)
		r.DNSLabel = types.StringValue(resp.DNSLabel)
		r.ID = types.StringValue(resp.ID)
		if len(resp.Labels) > 0 {
			r.Labels = make(map[string]types.String, len(resp.Labels))
			for key, value := range resp.Labels {
				r.Labels[key] = types.StringPointerValue(value)
			}
		}
		r.Name = types.StringValue(resp.Name)
		r.UpdatedAt = types.StringValue(typeconvert.TimeToString(resp.UpdatedAt))
	}

	return diags
}

func (r *EventGatewayVirtualClusterResourceModel) ToOperationsCreateEventGatewayVirtualClusterRequest(ctx context.Context) (*operations.CreateEventGatewayVirtualClusterRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var gatewayID string
	gatewayID = r.GatewayID.ValueString()

	createVirtualClusterRequest, createVirtualClusterRequestDiags := r.ToSharedCreateVirtualClusterRequest(ctx)
	diags.Append(createVirtualClusterRequestDiags...)

	if diags.HasError() {
		return nil, diags
	}

	out := operations.CreateEventGatewayVirtualClusterRequest{
		GatewayID:                   gatewayID,
		CreateVirtualClusterRequest: createVirtualClusterRequest,
	}

	return &out, diags
}

func (r *EventGatewayVirtualClusterResourceModel) ToOperationsDeleteEventGatewayVirtualClusterRequest(ctx context.Context) (*operations.DeleteEventGatewayVirtualClusterRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var gatewayID string
	gatewayID = r.GatewayID.ValueString()

	var virtualClusterID string
	virtualClusterID = r.ID.ValueString()

	out := operations.DeleteEventGatewayVirtualClusterRequest{
		GatewayID:        gatewayID,
		VirtualClusterID: virtualClusterID,
	}

	return &out, diags
}

func (r *EventGatewayVirtualClusterResourceModel) ToOperationsGetEventGatewayVirtualClusterRequest(ctx context.Context) (*operations.GetEventGatewayVirtualClusterRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var gatewayID string
	gatewayID = r.GatewayID.ValueString()

	var virtualClusterID string
	virtualClusterID = r.ID.ValueString()

	out := operations.GetEventGatewayVirtualClusterRequest{
		GatewayID:        gatewayID,
		VirtualClusterID: virtualClusterID,
	}

	return &out, diags
}

func (r *EventGatewayVirtualClusterResourceModel) ToOperationsUpdateEventGatewayVirtualClusterRequest(ctx context.Context) (*operations.UpdateEventGatewayVirtualClusterRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var gatewayID string
	gatewayID = r.GatewayID.ValueString()

	var virtualClusterID string
	virtualClusterID = r.ID.ValueString()

	updateVirtualClusterRequest, updateVirtualClusterRequestDiags := r.ToSharedUpdateVirtualClusterRequest(ctx)
	diags.Append(updateVirtualClusterRequestDiags...)

	if diags.HasError() {
		return nil, diags
	}

	out := operations.UpdateEventGatewayVirtualClusterRequest{
		GatewayID:                   gatewayID,
		VirtualClusterID:            virtualClusterID,
		UpdateVirtualClusterRequest: updateVirtualClusterRequest,
	}

	return &out, diags
}

func (r *EventGatewayVirtualClusterResourceModel) ToSharedCreateVirtualClusterRequest(ctx context.Context) (*shared.CreateVirtualClusterRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var name string
	name = r.Name.ValueString()

	description := new(string)
	if !r.Description.IsUnknown() && !r.Description.IsNull() {
		*description = r.Description.ValueString()
	} else {
		description = nil
	}
	id := new(string)
	if !r.Destination.ID.IsUnknown() && !r.Destination.ID.IsNull() {
		*id = r.Destination.ID.ValueString()
	} else {
		id = nil
	}
	name1 := new(string)
	if !r.Destination.Name.IsUnknown() && !r.Destination.Name.IsNull() {
		*name1 = r.Destination.Name.ValueString()
	} else {
		name1 = nil
	}
	destination := shared.BackendClusterReferenceModify{
		ID:   id,
		Name: name1,
	}
	authentication := make([]shared.VirtualClusterAuthenticationScheme, 0, len(r.Authentication))
	for _, authenticationItem := range r.Authentication {
		if authenticationItem.Anonymous != nil {
			typeVar := shared.VirtualClusterAuthenticationAnonymousType(authenticationItem.Anonymous.Type.ValueString())
			virtualClusterAuthenticationAnonymous := shared.VirtualClusterAuthenticationAnonymous{
				Type: typeVar,
			}
			authentication = append(authentication, shared.VirtualClusterAuthenticationScheme{
				VirtualClusterAuthenticationAnonymous: &virtualClusterAuthenticationAnonymous,
			})
		}
		if authenticationItem.SaslPlain != nil {
			typeVar1 := shared.VirtualClusterAuthenticationSaslPlainType(authenticationItem.SaslPlain.Type.ValueString())
			mediation := shared.Mediation(authenticationItem.SaslPlain.Mediation.ValueString())
			var principals []shared.VirtualClusterAuthenticationPrincipal
			if authenticationItem.SaslPlain.Principals != nil {
				principals = make([]shared.VirtualClusterAuthenticationPrincipal, 0, len(authenticationItem.SaslPlain.Principals))
				for _, principalsItem := range authenticationItem.SaslPlain.Principals {
					username := new(string)
					if !principalsItem.Username.IsUnknown() && !principalsItem.Username.IsNull() {
						*username = principalsItem.Username.ValueString()
					} else {
						username = nil
					}
					password := new(string)
					if !principalsItem.Password.IsUnknown() && !principalsItem.Password.IsNull() {
						*password = principalsItem.Password.ValueString()
					} else {
						password = nil
					}
					principals = append(principals, shared.VirtualClusterAuthenticationPrincipal{
						Username: username,
						Password: password,
					})
				}
			}
			virtualClusterAuthenticationSaslPlain := shared.VirtualClusterAuthenticationSaslPlain{
				Type:       typeVar1,
				Mediation:  mediation,
				Principals: principals,
			}
			authentication = append(authentication, shared.VirtualClusterAuthenticationScheme{
				VirtualClusterAuthenticationSaslPlain: &virtualClusterAuthenticationSaslPlain,
			})
		}
		if authenticationItem.SaslScram != nil {
			typeVar2 := shared.VirtualClusterAuthenticationSaslScramType(authenticationItem.SaslScram.Type.ValueString())
			algorithm := shared.VirtualClusterAuthenticationSaslScramAlgorithm(authenticationItem.SaslScram.Algorithm.ValueString())
			virtualClusterAuthenticationSaslScram := shared.VirtualClusterAuthenticationSaslScram{
				Type:      typeVar2,
				Algorithm: algorithm,
			}
			authentication = append(authentication, shared.VirtualClusterAuthenticationScheme{
				VirtualClusterAuthenticationSaslScram: &virtualClusterAuthenticationSaslScram,
			})
		}
		if authenticationItem.OauthBearer != nil {
			typeVar3 := shared.VirtualClusterAuthenticationOauthBearerType(authenticationItem.OauthBearer.Type.ValueString())
			mediation1 := shared.VirtualClusterAuthenticationOauthBearerMediation(authenticationItem.OauthBearer.Mediation.ValueString())
			var claimsMapping *shared.VirtualClusterAuthenticationClaimsMapping
			if authenticationItem.OauthBearer.ClaimsMapping != nil {
				sub := new(string)
				if !authenticationItem.OauthBearer.ClaimsMapping.Sub.IsUnknown() && !authenticationItem.OauthBearer.ClaimsMapping.Sub.IsNull() {
					*sub = authenticationItem.OauthBearer.ClaimsMapping.Sub.ValueString()
				} else {
					sub = nil
				}
				scope := new(string)
				if !authenticationItem.OauthBearer.ClaimsMapping.Scope.IsUnknown() && !authenticationItem.OauthBearer.ClaimsMapping.Scope.IsNull() {
					*scope = authenticationItem.OauthBearer.ClaimsMapping.Scope.ValueString()
				} else {
					scope = nil
				}
				claimsMapping = &shared.VirtualClusterAuthenticationClaimsMapping{
					Sub:   sub,
					Scope: scope,
				}
			}
			var jwks *shared.VirtualClusterAuthenticationJWKS
			if authenticationItem.OauthBearer.Jwks != nil {
				var endpoint string
				endpoint = authenticationItem.OauthBearer.Jwks.Endpoint.ValueString()

				timeout := new(string)
				if !authenticationItem.OauthBearer.Jwks.Timeout.IsUnknown() && !authenticationItem.OauthBearer.Jwks.Timeout.IsNull() {
					*timeout = authenticationItem.OauthBearer.Jwks.Timeout.ValueString()
				} else {
					timeout = nil
				}
				cacheExpiration := new(string)
				if !authenticationItem.OauthBearer.Jwks.CacheExpiration.IsUnknown() && !authenticationItem.OauthBearer.Jwks.CacheExpiration.IsNull() {
					*cacheExpiration = authenticationItem.OauthBearer.Jwks.CacheExpiration.ValueString()
				} else {
					cacheExpiration = nil
				}
				jwks = &shared.VirtualClusterAuthenticationJWKS{
					Endpoint:        endpoint,
					Timeout:         timeout,
					CacheExpiration: cacheExpiration,
				}
			}
			var validate *shared.VirtualClusterAuthenticationValidate
			if authenticationItem.OauthBearer.Validate != nil {
				var audiences []shared.VirtualClusterAuthenticationAudience
				if authenticationItem.OauthBearer.Validate.Audiences != nil {
					audiences = make([]shared.VirtualClusterAuthenticationAudience, 0, len(authenticationItem.OauthBearer.Validate.Audiences))
					for _, audiencesItem := range authenticationItem.OauthBearer.Validate.Audiences {
						var name2 string
						name2 = audiencesItem.Name.ValueString()

						audiences = append(audiences, shared.VirtualClusterAuthenticationAudience{
							Name: name2,
						})
					}
				}
				issuer := new(string)
				if !authenticationItem.OauthBearer.Validate.Issuer.IsUnknown() && !authenticationItem.OauthBearer.Validate.Issuer.IsNull() {
					*issuer = authenticationItem.OauthBearer.Validate.Issuer.ValueString()
				} else {
					issuer = nil
				}
				validate = &shared.VirtualClusterAuthenticationValidate{
					Audiences: audiences,
					Issuer:    issuer,
				}
			}
			virtualClusterAuthenticationOauthBearer := shared.VirtualClusterAuthenticationOauthBearer{
				Type:          typeVar3,
				Mediation:     mediation1,
				ClaimsMapping: claimsMapping,
				Jwks:          jwks,
				Validate:      validate,
			}
			authentication = append(authentication, shared.VirtualClusterAuthenticationScheme{
				VirtualClusterAuthenticationOauthBearer: &virtualClusterAuthenticationOauthBearer,
			})
		}
	}
	var dnsLabel string
	dnsLabel = r.DNSLabel.ValueString()

	labels := make(map[string]*string)
	for labelsKey, labelsValue := range r.Labels {
		labelsInst := new(string)
		if !labelsValue.IsUnknown() && !labelsValue.IsNull() {
			*labelsInst = labelsValue.ValueString()
		} else {
			labelsInst = nil
		}
		labels[labelsKey] = labelsInst
	}
	out := shared.CreateVirtualClusterRequest{
		Name:           name,
		Description:    description,
		Destination:    destination,
		Authentication: authentication,
		DNSLabel:       dnsLabel,
		Labels:         labels,
	}

	return &out, diags
}

func (r *EventGatewayVirtualClusterResourceModel) ToSharedUpdateVirtualClusterRequest(ctx context.Context) (*shared.UpdateVirtualClusterRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var name string
	name = r.Name.ValueString()

	description := new(string)
	if !r.Description.IsUnknown() && !r.Description.IsNull() {
		*description = r.Description.ValueString()
	} else {
		description = nil
	}
	id := new(string)
	if !r.Destination.ID.IsUnknown() && !r.Destination.ID.IsNull() {
		*id = r.Destination.ID.ValueString()
	} else {
		id = nil
	}
	name1 := new(string)
	if !r.Destination.Name.IsUnknown() && !r.Destination.Name.IsNull() {
		*name1 = r.Destination.Name.ValueString()
	} else {
		name1 = nil
	}
	destination := shared.BackendClusterReferenceModify{
		ID:   id,
		Name: name1,
	}
	authentication := make([]shared.VirtualClusterAuthenticationScheme, 0, len(r.Authentication))
	for _, authenticationItem := range r.Authentication {
		if authenticationItem.Anonymous != nil {
			typeVar := shared.VirtualClusterAuthenticationAnonymousType(authenticationItem.Anonymous.Type.ValueString())
			virtualClusterAuthenticationAnonymous := shared.VirtualClusterAuthenticationAnonymous{
				Type: typeVar,
			}
			authentication = append(authentication, shared.VirtualClusterAuthenticationScheme{
				VirtualClusterAuthenticationAnonymous: &virtualClusterAuthenticationAnonymous,
			})
		}
		if authenticationItem.SaslPlain != nil {
			typeVar1 := shared.VirtualClusterAuthenticationSaslPlainType(authenticationItem.SaslPlain.Type.ValueString())
			mediation := shared.Mediation(authenticationItem.SaslPlain.Mediation.ValueString())
			var principals []shared.VirtualClusterAuthenticationPrincipal
			if authenticationItem.SaslPlain.Principals != nil {
				principals = make([]shared.VirtualClusterAuthenticationPrincipal, 0, len(authenticationItem.SaslPlain.Principals))
				for _, principalsItem := range authenticationItem.SaslPlain.Principals {
					username := new(string)
					if !principalsItem.Username.IsUnknown() && !principalsItem.Username.IsNull() {
						*username = principalsItem.Username.ValueString()
					} else {
						username = nil
					}
					password := new(string)
					if !principalsItem.Password.IsUnknown() && !principalsItem.Password.IsNull() {
						*password = principalsItem.Password.ValueString()
					} else {
						password = nil
					}
					principals = append(principals, shared.VirtualClusterAuthenticationPrincipal{
						Username: username,
						Password: password,
					})
				}
			}
			virtualClusterAuthenticationSaslPlain := shared.VirtualClusterAuthenticationSaslPlain{
				Type:       typeVar1,
				Mediation:  mediation,
				Principals: principals,
			}
			authentication = append(authentication, shared.VirtualClusterAuthenticationScheme{
				VirtualClusterAuthenticationSaslPlain: &virtualClusterAuthenticationSaslPlain,
			})
		}
		if authenticationItem.SaslScram != nil {
			typeVar2 := shared.VirtualClusterAuthenticationSaslScramType(authenticationItem.SaslScram.Type.ValueString())
			algorithm := shared.VirtualClusterAuthenticationSaslScramAlgorithm(authenticationItem.SaslScram.Algorithm.ValueString())
			virtualClusterAuthenticationSaslScram := shared.VirtualClusterAuthenticationSaslScram{
				Type:      typeVar2,
				Algorithm: algorithm,
			}
			authentication = append(authentication, shared.VirtualClusterAuthenticationScheme{
				VirtualClusterAuthenticationSaslScram: &virtualClusterAuthenticationSaslScram,
			})
		}
		if authenticationItem.OauthBearer != nil {
			typeVar3 := shared.VirtualClusterAuthenticationOauthBearerType(authenticationItem.OauthBearer.Type.ValueString())
			mediation1 := shared.VirtualClusterAuthenticationOauthBearerMediation(authenticationItem.OauthBearer.Mediation.ValueString())
			var claimsMapping *shared.VirtualClusterAuthenticationClaimsMapping
			if authenticationItem.OauthBearer.ClaimsMapping != nil {
				sub := new(string)
				if !authenticationItem.OauthBearer.ClaimsMapping.Sub.IsUnknown() && !authenticationItem.OauthBearer.ClaimsMapping.Sub.IsNull() {
					*sub = authenticationItem.OauthBearer.ClaimsMapping.Sub.ValueString()
				} else {
					sub = nil
				}
				scope := new(string)
				if !authenticationItem.OauthBearer.ClaimsMapping.Scope.IsUnknown() && !authenticationItem.OauthBearer.ClaimsMapping.Scope.IsNull() {
					*scope = authenticationItem.OauthBearer.ClaimsMapping.Scope.ValueString()
				} else {
					scope = nil
				}
				claimsMapping = &shared.VirtualClusterAuthenticationClaimsMapping{
					Sub:   sub,
					Scope: scope,
				}
			}
			var jwks *shared.VirtualClusterAuthenticationJWKS
			if authenticationItem.OauthBearer.Jwks != nil {
				var endpoint string
				endpoint = authenticationItem.OauthBearer.Jwks.Endpoint.ValueString()

				timeout := new(string)
				if !authenticationItem.OauthBearer.Jwks.Timeout.IsUnknown() && !authenticationItem.OauthBearer.Jwks.Timeout.IsNull() {
					*timeout = authenticationItem.OauthBearer.Jwks.Timeout.ValueString()
				} else {
					timeout = nil
				}
				cacheExpiration := new(string)
				if !authenticationItem.OauthBearer.Jwks.CacheExpiration.IsUnknown() && !authenticationItem.OauthBearer.Jwks.CacheExpiration.IsNull() {
					*cacheExpiration = authenticationItem.OauthBearer.Jwks.CacheExpiration.ValueString()
				} else {
					cacheExpiration = nil
				}
				jwks = &shared.VirtualClusterAuthenticationJWKS{
					Endpoint:        endpoint,
					Timeout:         timeout,
					CacheExpiration: cacheExpiration,
				}
			}
			var validate *shared.VirtualClusterAuthenticationValidate
			if authenticationItem.OauthBearer.Validate != nil {
				var audiences []shared.VirtualClusterAuthenticationAudience
				if authenticationItem.OauthBearer.Validate.Audiences != nil {
					audiences = make([]shared.VirtualClusterAuthenticationAudience, 0, len(authenticationItem.OauthBearer.Validate.Audiences))
					for _, audiencesItem := range authenticationItem.OauthBearer.Validate.Audiences {
						var name2 string
						name2 = audiencesItem.Name.ValueString()

						audiences = append(audiences, shared.VirtualClusterAuthenticationAudience{
							Name: name2,
						})
					}
				}
				issuer := new(string)
				if !authenticationItem.OauthBearer.Validate.Issuer.IsUnknown() && !authenticationItem.OauthBearer.Validate.Issuer.IsNull() {
					*issuer = authenticationItem.OauthBearer.Validate.Issuer.ValueString()
				} else {
					issuer = nil
				}
				validate = &shared.VirtualClusterAuthenticationValidate{
					Audiences: audiences,
					Issuer:    issuer,
				}
			}
			virtualClusterAuthenticationOauthBearer := shared.VirtualClusterAuthenticationOauthBearer{
				Type:          typeVar3,
				Mediation:     mediation1,
				ClaimsMapping: claimsMapping,
				Jwks:          jwks,
				Validate:      validate,
			}
			authentication = append(authentication, shared.VirtualClusterAuthenticationScheme{
				VirtualClusterAuthenticationOauthBearer: &virtualClusterAuthenticationOauthBearer,
			})
		}
	}
	var dnsLabel string
	dnsLabel = r.DNSLabel.ValueString()

	labels := make(map[string]*string)
	for labelsKey, labelsValue := range r.Labels {
		labelsInst := new(string)
		if !labelsValue.IsUnknown() && !labelsValue.IsNull() {
			*labelsInst = labelsValue.ValueString()
		} else {
			labelsInst = nil
		}
		labels[labelsKey] = labelsInst
	}
	out := shared.UpdateVirtualClusterRequest{
		Name:           name,
		Description:    description,
		Destination:    destination,
		Authentication: authentication,
		DNSLabel:       dnsLabel,
		Labels:         labels,
	}

	return &out, diags
}
