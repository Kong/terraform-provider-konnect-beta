---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "konnect_event_gateway_virtual_cluster Resource - terraform-provider-konnect-beta"
subcategory: ""
description: |-
  EventGatewayVirtualCluster Resource
---

# konnect_event_gateway_virtual_cluster (Resource)

EventGatewayVirtualCluster Resource

## Example Usage

```terraform
resource "konnect_event_gateway_virtual_cluster" "my_eventgatewayvirtualcluster" {
  provider = konnect-beta
    authentication = [
    {
    sasl_plain = {
    mediation = "passthrough"
    principals = [
    {
                password = "${env['MY_SECRET']}"
            username = "...my_username..."
    }
    ]
    type = "sasl_plain"
}
    }
    ]
    description = "...my_description..."
    destination = {
            id = "759b5471-3de4-485c-b7d3-6e8cb8929d81"
        name = "...my_name..."
    }
    dns_label = "vcluster-1"
    gateway_id = "9524ec7d-36d9-465d-a8c5-83a3c9390458"
    labels = {
        key = "value"
    }
    name = "...my_name..."
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `authentication` (Attributes List) How to handle authentication from clients.

It tries to authenticate with every rule sequentially one by one.
It succeeds on the first match, and fails if no rule matches. (see [below for nested schema](#nestedatt--authentication))
- `destination` (Attributes) The backend cluster associated with the virtual cluster.

Either `id` or `name` must be provided. Following changes to the backend cluster name won't affect the
reference, as the system will create the entities relationship by `id`. (see [below for nested schema](#nestedatt--destination))
- `dns_label` (String) The DNS label used in the bootstrap server URL to identify the virtual cluster when using SNI routing.
The format follows the RFC1035: 1-63 chars, lowercase alphanumeric or '-', must start with a letter and end with an alphanumeric character.
- `gateway_id` (String) The UUID of your Gateway.
- `name` (String) The name of the virtual cluster.

### Optional

- `description` (String) A human-readable description of the virtual cluster.
- `labels` (Map of String) Labels store metadata of an entity that can be used for filtering an entity list or for searching across entity types. 

Keys must be of length 1-63 characters, and cannot start with "kong", "konnect", "mesh", "kic", or "_".

### Read-Only

- `created_at` (String) An ISO-8601 timestamp representation of entity creation date.
- `id` (String) The unique identifier of the virtual cluster.
- `updated_at` (String) An ISO-8601 timestamp representation of entity update date.

<a id="nestedatt--authentication"></a>
### Nested Schema for `authentication`

Optional:

- `anonymous` (Attributes) (see [below for nested schema](#nestedatt--authentication--anonymous))
- `oauth_bearer` (Attributes) Oauth Bearer authentication scheme for the virtual cluster. (see [below for nested schema](#nestedatt--authentication--oauth_bearer))
- `sasl_plain` (Attributes) SASL/PLAIN authentication scheme for the virtual cluster. (see [below for nested schema](#nestedatt--authentication--sasl_plain))
- `sasl_scram` (Attributes) SASL/SCRAM authentication scheme for the virtual cluster. (see [below for nested schema](#nestedatt--authentication--sasl_scram))

<a id="nestedatt--authentication--anonymous"></a>
### Nested Schema for `authentication.anonymous`

Optional:

- `type` (String) Not Null; must be "anonymous"


<a id="nestedatt--authentication--oauth_bearer"></a>
### Nested Schema for `authentication.oauth_bearer`

Optional:

- `claims_mapping` (Attributes) Maps JWT claims in the case when sub and scope are presented as different claims in your JWT token. (see [below for nested schema](#nestedatt--authentication--oauth_bearer--claims_mapping))
- `jwks` (Attributes) JSON Web Key Set configuration for verifying token signatures. (see [below for nested schema](#nestedatt--authentication--oauth_bearer--jwks))
- `mediation` (String) Methods to mediate authentication:
* passthrough - pass authentication from the client through proxy to the backend cluster without any kind of

  validation
* validate_forward - pass authentication from the client through proxy to the backend cluster.

  Proxy does the validation before forwarding it to the client.
* terminate - terminate authentication at the proxy level and originate authentication to the backend cluster

  using the configuration defined at BackendCluster's authentication.
  SASL auth is not originated if authentication on the backend_cluster is not configured.
Not Null; must be one of ["passthrough", "validate_forward", "terminate"]
- `type` (String) Not Null; must be "oauth_bearer"
- `validate` (Attributes) Validation rules. (see [below for nested schema](#nestedatt--authentication--oauth_bearer--validate))

<a id="nestedatt--authentication--oauth_bearer--claims_mapping"></a>
### Nested Schema for `authentication.oauth_bearer.claims_mapping`

Optional:

- `scope` (String) Maps the scope claim.
- `sub` (String) Maps the subject claim.


<a id="nestedatt--authentication--oauth_bearer--jwks"></a>
### Nested Schema for `authentication.oauth_bearer.jwks`

Optional:

- `cache_expiration` (String) Duration after which the gateway will fetch and cache JWKS. Default: "1h"
- `endpoint` (String) URL for JWKS endpoint. Not Null
- `timeout` (String) Total time from establishing connection to receive a response from JWKS endpoint. Default: "10s"


<a id="nestedatt--authentication--oauth_bearer--validate"></a>
### Nested Schema for `authentication.oauth_bearer.validate`

Optional:

- `audiences` (Attributes List) List of expected audience values. One of them has to match the audience claim in the token. (see [below for nested schema](#nestedatt--authentication--oauth_bearer--validate--audiences))
- `issuer` (String) Expected token issuer in the token.

<a id="nestedatt--authentication--oauth_bearer--validate--audiences"></a>
### Nested Schema for `authentication.oauth_bearer.validate.audiences`

Optional:

- `name` (String) Not Null




<a id="nestedatt--authentication--sasl_plain"></a>
### Nested Schema for `authentication.sasl_plain`

Optional:

- `mediation` (String) The mediation type for SASL/PLAIN authentication. Not Null; must be one of ["passthrough", "terminate"]
- `principals` (Attributes List) List of principals to be able to authenticate with, used with `terminate` mediation. (see [below for nested schema](#nestedatt--authentication--sasl_plain--principals))
- `type` (String) Not Null; must be "sasl_plain"

<a id="nestedatt--authentication--sasl_plain--principals"></a>
### Nested Schema for `authentication.sasl_plain.principals`

Optional:

- `password` (String) A template string expression containing a reference to a secret
- `username` (String) A template string expression containing a reference to a secret or a literal value



<a id="nestedatt--authentication--sasl_scram"></a>
### Nested Schema for `authentication.sasl_scram`

Optional:

- `algorithm` (String) The algorithm used for SASL/SCRAM authentication. Not Null; must be one of ["sha256", "sha512"]
- `type` (String) Not Null; must be "sasl_scram"



<a id="nestedatt--destination"></a>
### Nested Schema for `destination`

Optional:

- `id` (String) The unique identifier of the backend cluster.
- `name` (String) The unique name of the backend cluster.

## Import

Import is supported using the following syntax:

```shell
terraform import konnect_event_gateway_virtual_cluster.my_konnect_event_gateway_virtual_cluster '{"gateway_id": "9524ec7d-36d9-465d-a8c5-83a3c9390458", "id": ""}'
```
