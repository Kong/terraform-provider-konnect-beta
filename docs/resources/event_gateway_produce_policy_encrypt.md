---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "konnect_event_gateway_produce_policy_encrypt Resource - terraform-provider-konnect-beta"
subcategory: ""
description: |-
  EventGatewayProducePolicyEncrypt Resource
---

# konnect_event_gateway_produce_policy_encrypt (Resource)

EventGatewayProducePolicyEncrypt Resource

## Example Usage

```terraform
resource "konnect_event_gateway_produce_policy_encrypt" "my_eventgatewayproducepolicyencrypt" {
  provider = konnect-beta
    condition = "context.topic.name.endsWith('my_suffix')"
    config = {
            encrypt = [
        {
                        key_id = "static://static-key-named-in-source"
                part_of_record = "value"
        }
        ]
        failure_mode = "error"
        key_sources = [
        {
        static = {
    keys = [
    {
                id = "...my_id..."
            key = "${vault.env['MY_ENV_VAR']}"
    }
    ]
}
        }
        ]
    }
    description = "...my_description..."
    enabled = true
    gateway_id = "9524ec7d-36d9-465d-a8c5-83a3c9390458"
    labels = {
        key = "value"
    }
    name = "...my_name..."
    parent_policy_id = "d360a229-0d2f-4566-9b8e-dad95ffde3d0"
    virtual_cluster_id = "6ea3798e-38ca-4c28-a68e-1a577e478f2c"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `config` (Attributes) The configuration of the encrypt policy. (see [below for nested schema](#nestedatt--config))
- `gateway_id` (String) The UUID of your Gateway.
- `virtual_cluster_id` (String) The ID of the Virtual Cluster.

### Optional

- `condition` (String) A string containing the boolean expression that determines whether the policy is applied.
- `description` (String) A human-readable description of the policy.
- `enabled` (Boolean) Whether the policy is enabled. Default: true
- `labels` (Map of String) Labels store metadata of an entity that can be used for filtering an entity list or for searching across entity types. 

Keys must be of length 1-63 characters, and cannot start with "kong", "konnect", "mesh", "kic", or "_".
- `name` (String) A unique user-defined name of the policy.
- `parent_policy_id` (String) When specified, it sets the ID of the parent policy. Requires replacement if changed.

### Read-Only

- `created_at` (String) An ISO-8601 timestamp representation of entity creation date.
- `id` (String) The unique identifier of the policy.
- `updated_at` (String) An ISO-8601 timestamp representation of entity update date.

<a id="nestedatt--config"></a>
### Nested Schema for `config`

Required:

- `encrypt` (Attributes List) Describes what parts of a record to encrypt. (see [below for nested schema](#nestedatt--config--encrypt))
- `failure_mode` (String) Describes how to handle failing encryption or decryption.
Use `error` if the record should be rejected if encryption or decryption fails.
Use `passthrough` to ignore encryption or decryption failure and continue proxying the record.
must be one of ["error", "passthrough"]
- `key_sources` (Attributes List) Describes how to find a symmetric key for encryption. (see [below for nested schema](#nestedatt--config--key_sources))

<a id="nestedatt--config--encrypt"></a>
### Nested Schema for `config.encrypt`

Required:

- `key_id` (String) The id of the key to use for encryption. It must match one of the keys defined in the policy's key_sources.

An ID is a URI where the scheme refers to the type of key source and the rest is source-specific:
- static: the id defined in the list of static keys
- aws: a KMS key ARN
- `part_of_record` (String) * key - encrypt the record key
* value - encrypt the record value
must be one of ["key", "value"]


<a id="nestedatt--config--key_sources"></a>
### Nested Schema for `config.key_sources`

Optional:

- `aws` (Attributes) A key source that uses an AWS KMS to find a symmetric key. Load KMS credentials from the environment.

See [aws docs](https://docs.aws.amazon.com/sdk-for-rust/latest/dg/credproviders.html#credproviders-default-credentials-provider-chain)
for more information about how credential retrieval. (see [below for nested schema](#nestedatt--config--key_sources--aws))
- `static` (Attributes) A key source that uses a static symmetric key. The key is provided as a base64-encoded string. (see [below for nested schema](#nestedatt--config--key_sources--static))

<a id="nestedatt--config--key_sources--aws"></a>
### Nested Schema for `config.key_sources.aws`


<a id="nestedatt--config--key_sources--static"></a>
### Nested Schema for `config.key_sources.static`

Required:

- `keys` (Attributes List) A list of static, user-provided keys. Each one must be 128 bits long. (see [below for nested schema](#nestedatt--config--key_sources--static--keys))

<a id="nestedatt--config--key_sources--static--keys"></a>
### Nested Schema for `config.key_sources.static.keys`

Required:

- `id` (String) The unique identifier of the key.

Optional:

- `key` (String) A sensitive value containing the secret or a reference to a secret as a template string expression.
If the value is provided as plain text, it is encrypted at rest and omitted from API responses.
If provided as an expression, the expression itself is stored and returned by the API.

## Import

Import is supported using the following syntax:

```shell
terraform import konnect_event_gateway_produce_policy_encrypt.my_konnect_event_gateway_produce_policy_encrypt '{"gateway_id": "9524ec7d-36d9-465d-a8c5-83a3c9390458", "id": "9524ec7d-36d9-465d-a8c5-83a3c9390458", "virtual_cluster_id": ""}'
```
