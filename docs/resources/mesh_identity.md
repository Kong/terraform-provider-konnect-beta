---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "konnect_mesh_identity Resource - terraform-provider-konnect-beta"
subcategory: ""
description: |-
  MeshIdentity Resource
---

# konnect_mesh_identity (Resource)

MeshIdentity Resource

## Example Usage

```terraform
resource "konnect_mesh_identity" "my_meshidentity" {
  provider = konnect-beta
  cp_id = "bf138ba2-c9b1-4229-b268-04d9d8a6410b"
  labels = {
    key = "value"
  }
  mesh = "...my_mesh..."
  name = "...my_name..."
  spec = {
    provider = {
      bundled = {
        autogenerate = {
          enabled = false
        }
        ca = {
          certificate = {
            env_var = {
              name = "...my_name..."
            }
            file = {
              path = "...my_path..."
            }
            insecure_inline = {
              value = "...my_value..."
            }
            secret_ref = {
              kind = "Secret"
              name = "...my_name..."
            }
            type = "InsecureInline"
          }
          private_key = {
            env_var = {
              name = "...my_name..."
            }
            file = {
              path = "...my_path..."
            }
            insecure_inline = {
              value = "...my_value..."
            }
            secret_ref = {
              kind = "Secret"
              name = "...my_name..."
            }
            type = "File"
          }
        }
        certificate_parameters = {
          expiry = "...my_expiry..."
        }
        insecure_allow_self_signed = true
        mesh_trust_creation        = "Enabled"
      }
      spire = {
        agent = {
          timeout = "...my_timeout..."
        }
      }
      type = "Bundled"
    }
    selector = {
      dataplane = {
        match_labels = {
          key = "value"
        }
      }
    }
    spiffe_id = {
      path         = "...my_path..."
      trust_domain = "...my_trust_domain..."
    }
  }
  type = "MeshIdentity"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cp_id` (String) Id of the Konnect resource. Requires replacement if changed.
- `mesh` (String) name of the mesh. Requires replacement if changed.
- `name` (String) name of the MeshIdentity. Requires replacement if changed.
- `spec` (Attributes) Spec is the specification of the Kuma MeshIdentity resource. (see [below for nested schema](#nestedatt--spec))
- `type` (String) the type of the resource. must be "MeshIdentity"

### Optional

- `labels` (Map of String) The labels to help identity resources

### Read-Only

- `creation_time` (String) Time at which the resource was created
- `modification_time` (String) Time at which the resource was updated
- `status` (Attributes) Status is the current status of the Kuma MeshIdentity resource. (see [below for nested schema](#nestedatt--status))
- `warnings` (List of String) warnings is a list of warning messages to return to the requesting Kuma API clients.
Warning messages describe a problem the client making the API request should correct or be aware of.

<a id="nestedatt--spec"></a>
### Nested Schema for `spec`

Required:

- `provider` (Attributes) (see [below for nested schema](#nestedatt--spec--provider))

Optional:

- `selector` (Attributes) (see [below for nested schema](#nestedatt--spec--selector))
- `spiffe_id` (Attributes) (see [below for nested schema](#nestedatt--spec--spiffe_id))

<a id="nestedatt--spec--provider"></a>
### Nested Schema for `spec.provider`

Required:

- `type` (String) Type specifies the type of certificate provider. must be one of ["Bundled", "Spire"]

Optional:

- `bundled` (Attributes) Bundled provides information about certificates that are generated by the control plane,
either autogenerated or provided by the user. (see [below for nested schema](#nestedatt--spec--provider--bundled))
- `spire` (Attributes) Spire indicates that SPIRE is used for certificate delivery. (see [below for nested schema](#nestedatt--spec--provider--spire))

<a id="nestedatt--spec--provider--bundled"></a>
### Nested Schema for `spec.provider.bundled`

Optional:

- `autogenerate` (Attributes) Autogenerate configures the control plane to use self-signed certificates. (see [below for nested schema](#nestedatt--spec--provider--bundled--autogenerate))
- `ca` (Attributes) CA has configuration related to the CA (see [below for nested schema](#nestedatt--spec--provider--bundled--ca))
- `certificate_parameters` (Attributes) CertificateParameters allows users to define certificate generation parameters. (see [below for nested schema](#nestedatt--spec--provider--bundled--certificate_parameters))
- `insecure_allow_self_signed` (Boolean) InsecureAllowSelfSigned allows users to enable the use of self-signed certificates.
- `mesh_trust_creation` (String) MeshTrustCreation defines whether a MeshTrust resource should be automatically created
from an existing MeshIdentity. If not defined, the control plane automatically generates a MeshTrust.
must be one of ["Enabled", "Disabled"]

<a id="nestedatt--spec--provider--bundled--autogenerate"></a>
### Nested Schema for `spec.provider.bundled.autogenerate`

Optional:

- `enabled` (Boolean)


<a id="nestedatt--spec--provider--bundled--ca"></a>
### Nested Schema for `spec.provider.bundled.ca`

Optional:

- `certificate` (Attributes) Certificate allows the user to specify a custom certificate. (see [below for nested schema](#nestedatt--spec--provider--bundled--ca--certificate))
- `private_key` (Attributes) PrivateKey allows the user to specify a custom private key. (see [below for nested schema](#nestedatt--spec--provider--bundled--ca--private_key))

<a id="nestedatt--spec--provider--bundled--ca--certificate"></a>
### Nested Schema for `spec.provider.bundled.ca.certificate`

Required:

- `type` (String) must be one of ["File", "Secret", "EnvVar", "InsecureInline"]

Optional:

- `env_var` (Attributes) (see [below for nested schema](#nestedatt--spec--provider--bundled--ca--certificate--env_var))
- `file` (Attributes) (see [below for nested schema](#nestedatt--spec--provider--bundled--ca--certificate--file))
- `insecure_inline` (Attributes) (see [below for nested schema](#nestedatt--spec--provider--bundled--ca--certificate--insecure_inline))
- `secret_ref` (Attributes) (see [below for nested schema](#nestedatt--spec--provider--bundled--ca--certificate--secret_ref))

<a id="nestedatt--spec--provider--bundled--ca--certificate--env_var"></a>
### Nested Schema for `spec.provider.bundled.ca.certificate.env_var`

Required:

- `name` (String)


<a id="nestedatt--spec--provider--bundled--ca--certificate--file"></a>
### Nested Schema for `spec.provider.bundled.ca.certificate.file`

Required:

- `path` (String)


<a id="nestedatt--spec--provider--bundled--ca--certificate--insecure_inline"></a>
### Nested Schema for `spec.provider.bundled.ca.certificate.insecure_inline`

Required:

- `value` (String)


<a id="nestedatt--spec--provider--bundled--ca--certificate--secret_ref"></a>
### Nested Schema for `spec.provider.bundled.ca.certificate.secret_ref`

Required:

- `kind` (String) must be "Secret"
- `name` (String)



<a id="nestedatt--spec--provider--bundled--ca--private_key"></a>
### Nested Schema for `spec.provider.bundled.ca.private_key`

Required:

- `type` (String) must be one of ["File", "Secret", "EnvVar", "InsecureInline"]

Optional:

- `env_var` (Attributes) (see [below for nested schema](#nestedatt--spec--provider--bundled--ca--private_key--env_var))
- `file` (Attributes) (see [below for nested schema](#nestedatt--spec--provider--bundled--ca--private_key--file))
- `insecure_inline` (Attributes) (see [below for nested schema](#nestedatt--spec--provider--bundled--ca--private_key--insecure_inline))
- `secret_ref` (Attributes) (see [below for nested schema](#nestedatt--spec--provider--bundled--ca--private_key--secret_ref))

<a id="nestedatt--spec--provider--bundled--ca--private_key--env_var"></a>
### Nested Schema for `spec.provider.bundled.ca.private_key.env_var`

Required:

- `name` (String)


<a id="nestedatt--spec--provider--bundled--ca--private_key--file"></a>
### Nested Schema for `spec.provider.bundled.ca.private_key.file`

Required:

- `path` (String)


<a id="nestedatt--spec--provider--bundled--ca--private_key--insecure_inline"></a>
### Nested Schema for `spec.provider.bundled.ca.private_key.insecure_inline`

Required:

- `value` (String)


<a id="nestedatt--spec--provider--bundled--ca--private_key--secret_ref"></a>
### Nested Schema for `spec.provider.bundled.ca.private_key.secret_ref`

Required:

- `kind` (String) must be "Secret"
- `name` (String)




<a id="nestedatt--spec--provider--bundled--certificate_parameters"></a>
### Nested Schema for `spec.provider.bundled.certificate_parameters`

Optional:

- `expiry` (String)



<a id="nestedatt--spec--provider--spire"></a>
### Nested Schema for `spec.provider.spire`

Optional:

- `agent` (Attributes) Spire agent configuration (see [below for nested schema](#nestedatt--spec--provider--spire--agent))

<a id="nestedatt--spec--provider--spire--agent"></a>
### Nested Schema for `spec.provider.spire.agent`

Optional:

- `timeout` (String) Connection timeout to the socket exposed by Spire agent
Default 1 second.




<a id="nestedatt--spec--selector"></a>
### Nested Schema for `spec.selector`

Optional:

- `dataplane` (Attributes) (see [below for nested schema](#nestedatt--spec--selector--dataplane))

<a id="nestedatt--spec--selector--dataplane"></a>
### Nested Schema for `spec.selector.dataplane`

Optional:

- `match_labels` (Map of String)



<a id="nestedatt--spec--spiffe_id"></a>
### Nested Schema for `spec.spiffe_id`

Optional:

- `path` (String)
- `trust_domain` (String)



<a id="nestedatt--status"></a>
### Nested Schema for `status`

Read-Only:

- `conditions` (Attributes List) Conditions is an array of hostname generator conditions. (see [below for nested schema](#nestedatt--status--conditions))

<a id="nestedatt--status--conditions"></a>
### Nested Schema for `status.conditions`

Read-Only:

- `message` (String) message is a human readable message indicating details about the transition.
This may be an empty string.
- `reason` (String) reason contains a programmatic identifier indicating the reason for the condition's last transition.
Producers of specific condition types may define expected values and meanings for this field,
and whether the values are considered a guaranteed API.
The value should be a CamelCase string.
This field may not be empty.
- `status` (String) status of the condition, one of True, False, Unknown. must be one of ["True", "False", "Unknown"]
- `type` (String) type of condition in CamelCase or in foo.example.com/CamelCase.

## Import

Import is supported using the following syntax:

```shell
terraform import konnect_mesh_identity.my_konnect_mesh_identity '{"cp_id": "bf138ba2-c9b1-4229-b268-04d9d8a6410b", "mesh": "", "name": ""}'
```
